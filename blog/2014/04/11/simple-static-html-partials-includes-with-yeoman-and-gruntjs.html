<!doctype html><!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--><!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]--><!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]--><!--[if gt IE 8]><!--><html class=no-js><!--<![endif]--><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Simple static html partials includes with yeoman and grunt.js Site officiel</title><meta name=google-site-verification content=7Sm0TNkbdPiVI19igcgIRPadP14LheItev30UZxtkuM><meta name=description content=""><meta name=viewport content="width=device-width, initial-scale=1"><!-- Place favicon.ico and apple-touch-icon(s) in the root directory --><link rel=stylesheet href=css/main.cc0b.css><script src=js/modernizr.d41d.js></script></head><body data-spy=scroll data-target=.fixed-sidebar><!--[if lt IE 8]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
  <![endif]--><div class=container><div class=back-nav><a href=/blog/2013/09/10/testing_at_emuzikos.html class="btn btn-primary"><i class=icon-back></i> Previous</a> <a href="/" class="btn btn-primary"><i class=icon-back></i> Home</a></div><article class=post><div class=page-header><h1>Simple static html partials includes with yeoman and grunt.js</h1></div><p>So you have this typical static site built with <a href="http://">Yeoman</a>. You probably duplicated your layout for each of the pages you sites contains. So you probably wondered how to actually include some partials and DRY up these pages.</p><h2 id=the-tool>The tool</h2><p>First you’ll need to install <a href=https://github.com/MathiasPaumgarten/grunt-bake>Grunt bake</a></p><div class=highlight><pre><code class=bash>npm install grunt-bake --save-dev</code></pre></div><p>Since Yeoman is loading all the available tasks from the top of your grunt file, there is no need to import the bake tasks anymore.</p><p>Bake actually has a lot more tasks that we need for this simple example, so I’ll let you discover the rest.</p><h2 id=update-you-gruntjs-file>Update you grunt.js file</h2><p>First, create a bake task inside you grunt config.</p><div class=highlight><pre><code class=js><span class=nx>grunt</span><span class=p>.</span><span class=nx>initConfig</span><span class=p>({</span>
	<span class=nx>bake</span><span class=o>:</span> <span class=p>{</span>
	    <span class=nx>build</span><span class=o>:</span> <span class=p>{</span>
	        <span class=nx>options</span><span class=o>:</span> <span class=p>{</span>
	            <span class=c1>// Task-specific options go here.</span>
	        <span class=p>},</span>
	        <span class=nx>files</span><span class=o>:</span> <span class=p>{</span>
	            <span class=c1>// files go here, like so:</span>
	            <span class=s2>&quot;app/index.html&quot;</span><span class=o>:</span> <span class=s2>&quot;app/base.html&quot;</span>
	        <span class=p>}</span>
	    <span class=p>},</span>
	<span class=p>}</span>
<span class=p>});</span></code></pre></div><p>Since you need to include the partials before usemin take actions on the index.html to concatenate you assets, you need to <strong>rename your index.html to base.html</strong></p><p>Next, edit you server task:</p><div class=highlight><pre><code class=js><span class=nx>grunt</span><span class=p>.</span><span class=nx>registerTask</span><span class=p>(</span><span class=s1>&#39;server&#39;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>target</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>if</span> <span class=p>(</span><span class=nx>target</span> <span class=o>===</span> <span class=s1>&#39;dist&#39;</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>return</span> <span class=nx>grunt</span><span class=p>.</span><span class=nx>task</span><span class=p>.</span><span class=nx>run</span><span class=p>([</span><span class=s1>&#39;build&#39;</span><span class=p>,</span> <span class=s1>&#39;open&#39;</span><span class=p>,</span> <span class=s1>&#39;connect:dist:keepalive&#39;</span><span class=p>]);</span>
    <span class=p>}</span>
    <span class=nx>grunt</span><span class=p>.</span><span class=nx>task</span><span class=p>.</span><span class=nx>run</span><span class=p>([</span>
        <span class=s1>&#39;clean:server&#39;</span><span class=p>,</span>
        <span class=s1>&#39;bake:build&#39;</span><span class=p>,</span>
        <span class=s1>&#39;concurrent:server&#39;</span><span class=p>,</span>
        <span class=s1>&#39;connect:livereload&#39;</span><span class=p>,</span>
        <span class=s1>&#39;open&#39;</span><span class=p>,</span>
        <span class=s1>&#39;watch&#39;</span>
    <span class=p>]);</span>
<span class=p>});</span></code></pre></div><p>Now this will includes the partials in base.html to index.html and then will be moved to the temp directory for livereload to watch.</p><p>You also need to do somehting similar for the build task, make sure the bake task happens before the useminPrepare:</p><div class=highlight><pre><code class=js><span class=nx>grunt</span><span class=p>.</span><span class=nx>registerTask</span><span class=p>(</span><span class=s1>&#39;build&#39;</span><span class=p>,</span> <span class=p>[</span>
    <span class=s1>&#39;clean:dist&#39;</span><span class=p>,</span>
    <span class=s1>&#39;bake:build&#39;</span><span class=p>,</span>
    <span class=s1>&#39;useminPrepare&#39;</span><span class=p>,</span>
    <span class=s1>&#39;concurrent:dist&#39;</span><span class=p>,</span>
    <span class=s1>&#39;concat&#39;</span><span class=p>,</span>
    <span class=s1>&#39;cssmin&#39;</span><span class=p>,</span>
    <span class=s1>&#39;uglify&#39;</span><span class=p>,</span>
    <span class=s1>&#39;copy:dist&#39;</span><span class=p>,</span>
    <span class=s1>&#39;rev&#39;</span><span class=p>,</span>
    <span class=s1>&#39;usemin&#39;</span>
<span class=p>]);</span></code></pre></div><p>Now to make livereload catch your changes you need to add the folder where you want it to watch your partials. In our case we’ll use app/includes:</p><div class=highlight><pre><code class=js><span class=nx>watch</span><span class=o>:</span> <span class=p>{</span>
    <span class=nx>compass</span><span class=o>:</span> <span class=p>{</span>
        <span class=nx>files</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;&lt;%= yeoman.app %&gt;/styles/{,*/}*.{scss,sass}&#39;</span><span class=p>],</span>
        <span class=nx>tasks</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;compass:server&#39;</span><span class=p>]</span>
    <span class=p>},</span>
    <span class=nx>styles</span><span class=o>:</span> <span class=p>{</span>
        <span class=nx>files</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;&lt;%= yeoman.app %&gt;/styles/{,*/}*.css&#39;</span><span class=p>],</span>
        <span class=nx>tasks</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;copy:styles&#39;</span><span class=p>]</span>
    <span class=p>},</span>
    <span class=nx>bake</span><span class=o>:</span> <span class=p>{</span>
        <span class=nx>files</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&quot;&lt;%= yeoman.app %&gt;/includes/**&quot;</span> <span class=p>],</span>
        <span class=nx>tasks</span><span class=o>:</span> <span class=s2>&quot;bake:build&quot;</span>
    <span class=p>},</span>
    <span class=nx>livereload</span><span class=o>:</span> <span class=p>{</span>
        <span class=nx>options</span><span class=o>:</span> <span class=p>{</span>
            <span class=nx>livereload</span><span class=o>:</span> <span class=nx>LIVERELOAD_PORT</span>
        <span class=p>},</span>
        <span class=nx>files</span><span class=o>:</span> <span class=p>[</span>
            <span class=s1>&#39;&lt;%= yeoman.app %&gt;/*.html&#39;</span><span class=p>,</span>
            <span class=s1>&#39;.tmp/styles/{,*/}*.css&#39;</span><span class=p>,</span>
            <span class=s1>&#39;{.tmp,&lt;%= yeoman.app %&gt;}/scripts/{,*/}*.js&#39;</span><span class=p>,</span>
            <span class=s1>&#39;&lt;%= yeoman.app %&gt;/images/{,*/}*.{png,jpg,jpeg,gif,webp,svg}&#39;</span>
        <span class=p>]</span>
    <span class=p>}</span>
<span class=p>}</span></code></pre></div><h2 id=include-you-partials-in-basehtml>Include you partials in base.html</h2><div class=highlight><pre><code class=html><span class=c>&lt;!--(bake includes/header.html)--&gt;</span></code></pre></div><p>So a simple page could look like this:</p><div class=highlight><pre><code class=html><span class=c>&lt;!--(bake includes/header.html)--&gt;</span>
<span class=nt>&lt;div</span> <span class=na>class=</span><span class=s>&quot;container&quot;</span><span class=nt>&gt;</span>
  <span class=c>&lt;!--(bake includes/sidebar.html)--&gt;</span>
  <span class=c>&lt;!--(bake includes/main-content.html)--&gt;</span>
<span class=nt>&lt;/div&gt;</span></code></pre></div></article></div><script src=js/application.04e6.js></script><script src=js/plugins.4f71.js></script><script>//   (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
//     function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
//   e=o.createElement(i);r=o.getElementsByTagName(i)[0];
//   e.src='//www.google-analytics.com/analytics.js';
//   r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
//   ga('create','UA-2826331-18');ga('send','pageview');</script></body></html>